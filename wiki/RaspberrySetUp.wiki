#labels Featured
= Initial raspberry setup =

  * Download Debian Wheezy or Raspian ([http://www.raspberrypi.org/downloads download])
  * Install it using dd / Win32 diskimager (found on raspberry dl page)
  * Raspi should be accessable via SSH
  * Make the first setup of Raspberry as usual
  * Then Run the following lines of code:

They install arduino drivers, map the port to a supported name, installs java and samba

{{{
sudo -s
apt-get update && apt-get upgrade
apt-get install openjdk-6-jdk arduino samba vim
ln -s /dev/ttyACM0 /dev/ttyUSB0
}}}   

= Installing Tomcat =

  * Download and unpack tomcat
{{{
sudo -s
cd /etc/
wget http://mirrors.axint.net/apache/tomcat/tomcat-7/v7.0.35/bin/apache-tomcat-7.0.35.tar.gz
tar xzf apache-tomcat-7.0.35.tar.gz
rm apache-tomcat-7.0.35.tar.gz
cd apache-tomcat-7.0.35/conf
vi tomcat-users.xml
}}}
  * Add a new tomcat user like this:
{{{
   <user username="pi" password="raspberry" roles="login"/>
}}}


 =Copy .war file to Raspberry=
The easiest way to send the file to the raspberry is to connect via SFTP (same port and login like SSD, notice the "S" before FTP!)
Copy the HomeBase.war File to: "/etc/apache-tomcat-7.0.35/webapps".. Thats it :)


  * Run tomcat
{{{
   cd ../bin
   sudo sh startup.sh
}}}

== Run tomcat on startup ==

create a new file called "tomcat" in "/etc/init.d" and copy the following content into it: (please note the current apache tomcat folder location!)

Create a new file: *vim /etc/init.d/tomcat* then *i* for *i*nsert mode

{{{
#!/bin/bash

### BEGIN INIT INFO
# Provides: tomcat
# Required-Start: $network $syslog
# Required-Stop: $network $syslog
# Default-Start:
# Default-Stop:
# Description: Script for starting and stopping tomcat webserver
# Short-Description: start and stop tomcat
### END INIT INFO

RESULT=$?
CATALINA_HOME="/etc/apache-tomcat-7.0.35"

case "$1" in
 start)
        if [ -f $CATALINA_HOME/bin/startup.sh ];
          then
	    echo $"Starting Tomcat"
            sudo ln -s /dev/ttyACM0 /dev/ttyUSB0 
            sudo sh $CATALINA_HOME/bin/startup.sh
        fi
	;;
 stop)
        if [ -f $CATALINA_HOME/bin/shutdown.sh ];
          then
	    echo $"Stopping Tomcat"
            sudo sh $CATALINA_HOME/bin/shutdown.sh
        fi
 	;;
 *)
 	echo $"Following command missing: $0 {start|stop}"
	exit 1
	;;
esac

exit $RESULT
}}}

After saving the script run: 
{{{
sudo update-rc.d tomcat defaults
}}}

* Finished! *